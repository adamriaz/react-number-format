"use strict";(self.webpackChunkreact_number_format=self.webpackChunkreact_number_format||[]).push([[497],{4051:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>F,contentTitle:()=>w,default:()=>z,frontMatter:()=>y,metadata:()=>x,toc:()=>E});var a=n(7462),r=n(3366),o=n(7294),i=n(3905),m=n(7333);function l(e){return o.createElement(m.F7,(0,a.Z)({},e,{format:function(e){return""===e?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e)}}))}function u(){var e=(0,o.useState)({}),t=e[0],n=e[1];return o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("b",null,"To see the value change, type something in the input field")),o.createElement("p",null,o.createElement(l,{value:111,onValueChange:function(e,t){n(e)}})),o.createElement("hr",null),o.createElement("code",null,JSON.stringify(t)),o.createElement("hr",null))}var s=function(e,t){if(""===e)return"";var n=e.substring(0,2),a=e.substring(2,4);return 1===n.length&&n[0]>1?n="0"+n[0]:2===n.length&&(0===Number(n)?n="01":Number(n)>12&&(n="12")),n+(t?"/":"")+a};function c(e){return o.createElement(m.F7,(0,a.Z)({},e,{format:function(e){return s(e,!0)}}))}function p(){var e=(0,o.useState)({}),t=e[0],n=e[1];return o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("b",null,"To see the value change, type something in the input field")),o.createElement("div",null,o.createElement(c,{onValueChange:function(e,t){n(e)}})),o.createElement("hr",null),o.createElement("code",null,JSON.stringify(t)),o.createElement("hr",null))}var d=["format"];function f(e){var t=(0,m.v5)(Object.assign({},e,{format:"##/##"})),n=t.format,i=(0,r.Z)(t,d);return o.createElement(m.F7,(0,a.Z)({format:function(e){return n(s(e))}},i))}function h(){var e=(0,o.useState)({}),t=e[0],n=e[1];return o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("b",null,"To see the value change, type something in the input field")),o.createElement("div",null,o.createElement(f,{onValueChange:function(e,t){n(e)}})),o.createElement("hr",null),o.createElement("code",null,JSON.stringify(t)),o.createElement("hr",null))}var v=["format","removeFormatting"],g=["\u06f0","\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9"];function N(e){var t=(0,m.KG)(e),n=t.format,i=t.removeFormatting,l=(0,r.Z)(t,v);return o.createElement(m.F7,(0,a.Z)({format:function(e){return n(e).replace(/\d/g,(function(e){return g[Number(e)]}))},removeFormatting:function(e){var t=e.replace(new RegExp(g.join("|"),"g"),(function(e){return g.indexOf(e)}));return i(t)}},l))}function k(){var e=(0,o.useState)({}),t=e[0],n=e[1];return o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("b",null,"To see the value change, type something in the input field")),o.createElement("div",null,o.createElement(N,{prefix:"$",onValueChange:function(e,t){n(e)}})),o.createElement("hr",null),o.createElement("code",null,JSON.stringify(t)),o.createElement("hr",null))}var b=["components"],y={title:"Customization",sidebar_position:5},w=void 0,x={unversionedId:"customization",id:"customization",title:"Customization",description:"",source:"@site/docs/customization.md",sourceDirName:".",slug:"/customization",permalink:"/react-number-format/docs/customization",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/customization.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Customization",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Pattern Format",permalink:"/react-number-format/docs/pattern_format"},next:{title:"Migration guide",permalink:"/react-number-format/docs/migration"}},F={},E=[{value:"Concept",id:"concept",level:2},{value:"Examples",id:"examples",level:2},{value:"Intl.NumberFormat based formatting",id:"intlnumberformat-based-formatting",level:3},{value:"Card expiry field",id:"card-expiry-field",level:3},{value:"Card expiry field with usePatternFormat",id:"card-expiry-field-with-usepatternformat",level:3},{value:"Custom numeral example",id:"custom-numeral-example",level:3}],C={toc:E};function z(e){var t=e.components,n=(0,r.Z)(e,b);return(0,i.kt)("wrapper",(0,a.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"concept"},"Concept"),(0,i.kt)("p",null,"React Number Format v5 is a complete rewrite with a goal of keeping it fully customizable to support all the custom case different product can have."),(0,i.kt)("p",null,"The primary thing which react number format controls is apply formatting in place (in the input) while managing correct caret position. It tries to understand what user is trying to do, add number, cut/paste, delete, and manage cursor position accordingly."),(0,i.kt)("p",null,"At the core of React number format lies NumberFormatBase, which works on four main props controlled from parent."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"format"),": A format function which can turn any numeric string to a formatted string."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"removeFormatting"),": A function to removing formatting from a formatted string and return numeric string."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"isValidInputCharacter"),": A function to tell if a character in the formatted value is a valid typeable character. You don't need to pass it most of the time, as it defaults numeric characters (0-9). But case like additional character is allowed to type, for example decimal separator in currency format."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"getCaretBoundary"),": A function given a formatted string, returns boundaries of valid cursor position. basically an array of boolean, where index of specify caret position. true at a index signifies user can put their caret at the position, false means the caret position is not allowed and the caret will move to closet allowed position.")),(0,i.kt)("p",null,"Most of the time you don't have to define getCaretBoundary, as the default one is enough, but in case you need to define, it looks something like this."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function caretUnknownFormatBoundary(formattedValue) {\n  const boundaryAry = Array.from({ length: formattedValue.length + 1 }).map(() => true);\n\n  for (let i = 0, ln = boundaryAry.length; i < ln; i++) {\n    // consider caret to be in boundary if it is before or after numeric value\n    boundaryAry[i] = Boolean(\n      formattedValue[i].match(/\\d/) || formattedValue[i - 1].match(/\\d/);,\n    );\n  }\n\n  return boundaryAry;\n}\n")),(0,i.kt)("p",null,"Apart from this prop some key handling are required depending on use case which can be done using native events, onKeyDown/onKeyUp etc."),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("p",null,"To give an example a basic implementation of number formatting if we have simple use case to format number without decimals and negative number support."),(0,i.kt)("h3",{id:"intlnumberformat-based-formatting"},"Intl.NumberFormat based formatting"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { NumberFormatBase } from 'react-number-format';\n\nfunction MyCustomNumberFormat(props) {\n  const format = (numStr) => {\n    if (numStr === '') return '';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      maximumFractionDigits: 0,\n    }).format(numStr);\n  };\n\n  return <NumberFormatBase {...props} format={format} />;\n}\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)(u,{mdxType:"CustomNumberFormat"}))),(0,i.kt)("p",null,"Another example of card expiry field."),(0,i.kt)("h3",{id:"card-expiry-field"},"Card expiry field"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { NumberFormatBase } from 'react-number-format';\n\nfunction CardExpiry(props) {\n  const format = (val) => {\n    if (val === '') return '';\n    let month = val.substring(0, 2);\n    const year = val.substring(2, 4);\n\n    if (month.length === 1 && month[0] > 1) {\n      month = `0${month[0]}`;\n    } else if (month.length === 2) {\n      // set the lower and upper boundary\n      if (Number(month) === 0) {\n        month = `01`;\n      } else if (Number(month) > 12) {\n        month = '12';\n      }\n    }\n\n    return `${month}/${year}`;\n  };\n\n  return <NumberFormatBase {...props} format={format} />;\n}\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)(p,{mdxType:"CardExpiry"}))),(0,i.kt)("p",null,"A couple of time we want to get all the features of NumericFormat or PatterFormat, and apply some customization on top of it. Well NumberFormat allows to do that as well. It provides\n",(0,i.kt)("inlineCode",{parentName:"p"},"usePatternFormat")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"useNumericFormat")," hook which can be used in conjunction with NumberFormatBase."),(0,i.kt)("p",null,"Let's take the same example of Card Expiry field."),(0,i.kt)("h3",{id:"card-expiry-field-with-usepatternformat"},"Card expiry field with usePatternFormat"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function CardExpiry(props) {\n  /**\n   * usePatternFormat, returns all the props required for NumberFormatBase\n   * which we can extend in between\n   */\n  const { format, ...rest } = usePatternFormat({ ...props, format: '##/##' });\n\n  const _format = (val) => {\n    let month = val.substring(0, 2);\n    const year = val.substring(2, 4);\n\n    if (month.length === 1 && month[0] > 1) {\n      month = `0${month[0]}`;\n    } else if (month.length === 2) {\n      // set the lower and upper boundary\n      if (Number(month) === 0) {\n        month = `01`;\n      } else if (Number(month) > 12) {\n        month = '12';\n      }\n    }\n\n    return format(`${month}${year}`);\n  };\n\n  return <NumberFormatBase format={_format} {...rest} />;\n}\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)(h,{mdxType:"CardExpiryFormat"}))),(0,i.kt)("p",null,"Another example for NumericFormat could be support for custom numerals."),(0,i.kt)("h3",{id:"custom-numeral-example"},"Custom numeral example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const persianNumeral = ['\u06f0', '\u06f1', '\u06f2', '\u06f3', '\u06f4', '\u06f5', '\u06f6', '\u06f7', '\u06f8', '\u06f9'];\n\nfunction CustomNumeralNumericFormat(props) {\n  const { format, removeFormatting, ...rest } = useNumericFormat(props);\n\n  const _format = (val) => {\n    const _val = format(val);\n    return _val.replace(/\\d/g, ($1) => persianNumeral[Number($1)]);\n  };\n\n  const _removeFormatting = (val) => {\n    const _val = val.replace(new RegExp(persianNumeral.join('|'), 'g'), ($1) =>\n      persianNumeral.indexOf($1),\n    );\n\n    return removeFormatting(_val);\n  };\n\n  return <NumberFormatBase format={_format} removeFormatting={_removeFormatting} {...rest} />;\n}\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)(k,{mdxType:"CustomNumericFormat"}))))}z.isMDXComponent=!0}}]);